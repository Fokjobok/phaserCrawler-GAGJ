html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: #000;
}

/* Ensure the Phaser container fills the viewport */
#game-container {
  width: 100%;
  height: 100%;
}

/* Canvas should not create extra baseline spacing */
canvas {
  display: block;
}

/* Dialog container overlaying the Phaser canvas */
.dialogContainer {
    position: absolute;
    top: 0;
    left: 0;
}

/* Main textbox for dialogues */
.textbox {
    position: absolute;
    transform: translateX(-50%);
    width: 60%;
    height: 170px;
    left: 50%;
    bottom: 20px;

    color: white;
    font-size: 1.125rem;
    padding: 12px;
    border: 3px solid rgba(0, 200, 230, 0.4 );
    border-radius: 0.5rem;
    box-sizing: border-box;
    /* Permite que elementos hijos sobresalgan (p. ej. speakerNameBox) */
    overflow: visible;
    background: linear-gradient(180deg, rgba(15,15,18,0.85) 0%, rgba(15,15,18,0.75) 100%);
    -webkit-backdrop-filter: blur(4px) saturate(120%);
    backdrop-filter: blur(3px) saturate(120%);
}

/* Contenido scrollable dentro de la textbox */
.textbox-content {
    width: 100%;
    height: 100%;
    overflow-y: auto;
}

/* Speaker name box nested inside the textbox, positioned above it */
.speakerNameBox-dialog {
    position: absolute;
    /* Anclar al interior de la textbox pero sobresaliendo por arriba */
    left: 1.5rem;
    top: -2.89rem;
    min-width: 6rem;
    width: 7rem;
    height: 1.7rem;
    background: rgba(0, 0, 0, 0.9);
    color: gold;
    font-size: 1.5rem;
    text-align: center;
    padding: 8px 15px;
    border-radius: 0.5rem 0.5rem 0 0;
    display: none; /* visible sólo cuando hay speaker */
    font-weight: bold;
    z-index: 2;
}

.speakerNameBox-menu {

    min-width: 12rem;
    width: 12rem;
    height: 1.5rem;
    position: absolute;
    left: 28.5%;
    bottom: 24.5%;
    background: rgba(0, 0, 0, 0.8);
    color: gold;
    font-size: 1.5rem;
    text-align: center;
    padding: 15px 15px;
    border-radius: 0.5rem 0.5rem 0 0;
    display: block;
    font-weight: bold;
}

/* NPC image style */
.npcImage {
    position: absolute;
    transform: translateX(-50%);
    width: auto;
    min-width: 34%; /* Se adapta al ancho mínimo */
    min-height: 200px; /* Ajusta esto según el tamaño mínimo deseado */
    height: auto; /* Mantiene la relación de aspecto */
    max-width: 42%; /* Se adapta al ancho máximo */
    max-height: 625px;
    left: 60%;
    bottom: 191px;
    display: none;
    /* Sombra en contorno superior y laterales, evitando la parte inferior para no interferir con la textbox */
    filter: drop-shadow(0 -12px 14px rgba(0,0,0,0.65))
            drop-shadow(12px 0 14px rgba(0,0,0,0.65))
            drop-shadow(-12px 0 14px rgba(0,0,0,0.65));
}

/* Narrator text style */
.narratorText {
    font-style: italic;
}

.headerTitle {
    color: white;
}







/* Contenedor global del HUD */
#hudContainer {
    position: absolute;
    top: 2rem;
    left: 2rem;
    display: flex;
    gap: 1rem;
    font-family: Arial, sans-serif;
    z-index: 100;
}
/* Tarjeta HUD por miembro */
.hudMember {
    display: flex;
    align-items: stretch;
    cursor: pointer;
    overflow: hidden;
    width: 6rem;   /* colapsado */
    height: 8.5rem;
    border-radius: 12px;
    background: linear-gradient(180deg, rgba(15,15,18,0.8) 0%, rgba(15,15,18,0.65) 100%);
    backdrop-filter: blur(6px) saturate(120%);
    border: 3px solid transparent; /* color por clase aplicado dinámicamente */
    box-shadow: 0 10px 24px rgba(0,0,0,0.45);
    transition: width .35s ease;
}
.hudMember.expanded { width: 28rem; }

.hudImage {
    position: relative;
    width: 6rem;
    height: auto;
    background-size: cover;
    background-position: center;
    border-top-right-radius: 12px;
    border-bottom-right-radius: 12px;
    transition: border-radius .35s ease;
    flex-shrink: 0;
}

/* (Siempre redondeado; se anima durante la transición) */

.hudImageTint {
    position: absolute;
    inset: 0;
    border-right: 1px solid rgba(255,255,255,0.08);
    mix-blend-mode: multiply;
    opacity: 0.8;
    pointer-events: none;
}

.hudInfo {
    display: none;
    padding: .75rem .9rem;
    color: #e9eef2;
    width: 100%;
}
.hudMember.expanded .hudInfo { 
    display: flex;
    flex-direction: column;
    gap: .45rem;
}

.hudNameRow {
    display: flex;
    align-items: baseline;
    justify-content: space-between;
    gap: .75rem;
}
.hudNameRow .hudName {
    font-weight: 700;
    font-size: 1.1rem;
}
.hudNameRow .hudJob {
    opacity: .85;
    font-size: 1.1rem;
}
.hudNameRow .hudLvl {
    opacity: .9;
    font-size: 1.1rem;
}

.hudBars {
    display: flex;
    flex-direction: column;
    gap: .55rem;
}
.hudBar {
    position: relative;
    height: 20px; border-radius: 10px;
    background: rgba(255,255,255,0.08);
    border: 1px solid rgba(255,255,255,0.12);
    overflow: hidden;
}
.hudBarFill {
    position: absolute;
    left: 0; top: 0;
    height: 100%;
    border-radius: 10px 8px 8px 10px;
}
.hudBarText {
    position: absolute;
    width: 100%; height: 100%;
    left: 0; top: 0; display: flex;
    align-items: center;
    justify-content: center;
    font-size: .85rem;
    font-weight: 700;
    color: #e9eef2;
    text-shadow: 0 1px 2px rgba(0,0,0,0.65);
}

/* Colores de barras */
.bar-hp {
    background: linear-gradient(90deg, rgba(210,30,30,0.95), rgba(255,80,80,0.9));
}
.bar-sp {
    background: linear-gradient(90deg, rgba(25,110,220,0.95), rgba(80,170,255,0.9));
}
.bar-exp {
    background: linear-gradient(90deg, rgba(210,170,30,0.95), rgba(255,215,80,0.9));
}

/* Opcional: estilos adicionales para lockOverlay */
.lockOverlay { position: absolute;
    inset: 0; display: flex;
    justify-content: center;
    align-items: center;
    font-size: 2rem;
    color: #e9eef2;
    background: rgba(0,0,0,0.5);
}





/* Última definición de #movementMap */
#movementMap {
    background: rgba(0, 0, 0, 0.7);
    padding: 15px;
    border-radius: 8px;
    text-align: center;
    margin-bottom: 15px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
}

/* Última definición de .nodeBox */
.nodeBox {
    display: inline-block;
    width: 5rem;
    height: 2.5rem;
    line-height: 40px;
    margin: 5px;
    background: #ccc;
    border-radius: 4px;
    font-size: 1rem;
    color: #000;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

/* Última definición de .nodeBox.currentNode */
.nodeBox.currentNode {
    background: #00ff00;
    border-color: #fff;
    font-weight: bold;
    color: #000;
}
